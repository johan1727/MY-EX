
    const handleDeleteProfile = async (profileId: string, exName: string) => {
        if (!window.confirm(`¿Eliminar perfil de ${exName}?`)) return;
        
        try {
            localStorage.removeItem('exSimulator_currentProfile');
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('exSimulator_conversation_')) {
                    localStorage.removeItem(key);
                }
            });
            
            await supabase.from('ex_profiles_deep').delete().eq('id', profileId).catch(console.warn);
            
            setProfiles([]);
            setSelectedProfile(null);
            
            console.log('[Dashboard] ✅ Profile deleted');
            window.location.reload();
        } catch (e) {
            console.error('[Delete] Error:', e);
            window.alert('Error al eliminar');
        }
    };
